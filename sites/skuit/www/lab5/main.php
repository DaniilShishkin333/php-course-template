<?
$names = [
"–ê–ª—å–¥–∞—Ä","–ë–µ—Ä–µ–Ω","–ö–µ–ª–µ–±–æ—Ä–Ω","–¢–µ–æ–¥—Ä–µ–¥","–≠–æ–º–µ—Ä","–§–∞—Ä–∞–º–∏—Ä","–î–µ–Ω–µ—Ç–æ—Ä","–•–∞–ª–¥–∏—Ä","–ì–ª–æ—Ä—Ñ–∏–Ω–¥–µ–ª","–¢—Ä–∞–Ω–¥—É–∏–ª",
"–≠–ª—å–¥–∞–Ω","–ú–∞–±–ª–æ–Ω","–ë—Ä–∞–Ω–¥–æ—Ä","–ê—Ä–∞–Ω–µ–ª—å","–õ–æ—Ç–∞—Ä–∏–æ–Ω","–ú–µ–ª—å–∫–æ—Ä","–ê–Ω–≥–º–∞—Ä","–°–∞—ç—Ä–æ–Ω","–≠–∞—Ä–µ–Ω–¥–∏–ª","–≠–ª—å—Ä–æ—Å",
"–ê–¥–µ–ª–∏–Ω–∞","–ú–∏—Ä–∏—ç–ª—å","–ò–¥—É–Ω–Ω","–õ–∏–∞–Ω–∞","–≠–ª–µ–Ω–∏—ç–ª—å","–õ—é—Ç–∏—ç–Ω","–ì–∞–ª–∞–¥—Ä–∏—ç–ª—å","–ê—Ä–≤–µ–Ω","–ù–∏–º—Ä–æ–¥—ç–ª—å","–í–∏–¥–∞—Ä–∏—è",
"–°–∏–ª—å–º–∞—Ä–∏—ç–Ω","–≠–ª–µ–Ω–¥–∏—Å","–ê–ª—å–≤–∏–Ω–∞","–†–∏–∞–Ω–Ω–∞","–§–∏–Ω–¥—É–∏–ª–∞—Å","–≠—Å—Ç–µ–ª–ª–∞","–ú–æ—Ä–≤–µ–Ω","–≠—Ä–∏—Å–µ–ª—å","–ô–æ–≤–∞–Ω–Ω–∞","–ú–∏—Ä–∞–Ω–¥–∏–ª—å",
"–ë–æ—Ä–æ–º–∏—Ä","–¢—É—Ä–∏–Ω","–§–∏–Ω—Ä–æ–¥","–ú–∞—ç–≥–ª–∏–Ω","–û—Ä–æ–¥—Ä–µ—Ç","–¢–µ–ª–∏–æ–Ω","–ê–Ω–≥—Ä–æ–Ω","–î–æ—Ä–∏–∞–Ω","–§–µ–∞–Ω–æ—Ä","–≠–Ω–¥–∞—Ä",
"–ê–Ω–≥–≤–∏–Ω","–°–µ–±–∞–ª—å–¥","–≠–º–∏–ª—å–¥–æ—Ä","–í–∞—Ä–≥–µ–ª—å–¥","–¢–∞—Ä–≤–∏–Ω","–≠–ª–∞—Ä–∏–æ–Ω","–†—É–≥–≤–∏—Ä","–î–∞–≥–æ—Ä","–ú–µ–ª—å–¥–∞","–≠–æ—Ñ—Ä–∏–¥",
"–ì–æ–¥—Ñ—Ä–∏","–ì–∏–ª—å–æ–º","–†–∏—á–∞—Ä–¥","–ì–µ–Ω—Ä–∏","–≠–¥–º—É–Ω–¥","–†–æ–¥–µ—Ä–∏–∫","–ö–æ–Ω—Ä–∞–¥","–ê–ª—å—Ñ—Ä–µ–¥","–≠—Ä–Ω—Å—Ç","–ì—É–≥–æ",
"–í–∏–ª—å–≥–µ–ª—å–º","–¢–æ–º–∞—Å","–û—É—ç–Ω","–§–∏–ª–∏–ø–ø","–°—Ç–µ—Ñ–∞–Ω","–õ–µ–æ–Ω–∞—Ä–¥","–†–æ–±–µ—Ä—Ç","–î–∂–æ–Ω","–ê—Ä—Ç—É—Ä","–ú—ç—Ç—å—é",
"–ê–≥–∞—Ç–∞","–§–ª–æ—Ä–µ–Ω—Å","–ú–∞—Ä–≥–∞—Ä–µ—Ç","–≠–¥–∏—Ç","–°–∏–±–∏–ª–ª–∞","–ö–∞—Ç–∞—Ä–∏–Ω–∞","–≠–ª—å—Ñ—Ä–∏–¥–∞","–ò–∑–æ–ª—å–¥–∞","–ë–µ–∞—Ç—Ä–∏—Å–∞","–†–æ–∑–∞–ª–∏–Ω–¥–∞",
"–°–µ—Å–∏–ª—å","–î–∂—É–ª–∏–∞–Ω–∞","–ú–∞—Ç–∏–ª—å–¥–∞","–≠–ª–µ–æ–Ω–æ—Ä–∞","–ö–ª–µ–º–µ–Ω—Ç–∏–Ω–∞","–§–µ–ª–∏—Ü–∏—è","–í–∞–ª–µ–Ω—Ç–∏–Ω–∞","–ê–º–µ–ª–∏—è","–ì–µ—Ä—Ç—Ä—É–¥–∞","–•–µ–ª–µ–Ω–∞"
];
$genders = ["–º—É–∂—á–∏–Ω–∞", "–∂–µ–Ω—â–∏–Ω–∞"];
$villagers = [];
$villagerCount = rand(2, 100);
for ($i = 0; $i < $villagerCount; $i++) {
    $villagers[] = [
        "name" => $names[array_rand($names)] . " " . ($i + 1),
        "age" => rand(12, 60),
        "gender" => $genders[array_rand($genders)],
        "hp" => rand(10, 15),
        "strength" => rand(3, 5),
        "intelligence" => rand(3, 5),
    ];
}
$conscripts = [];
foreach ($villagers as $villager) {
    if ($villager["gender"] ==  "–º—É–∂—á–∏–Ω–∞" && $villager["age"] > 18) {
        $conscripts[] = $villager;
    }
}
$weapons = [
["name" => "–õ—É–∫", "bonus" => ["strength" => 2, "intelligence" => 1, "hp" => 0], "class" => "ranged"],
["name" => "–ü—Ä–∞—â–∞", "bonus" => ["strength" => 1, "intelligence" => 0, "hp" => 0], "class" => "ranged"],
["name" => "–ú–µ—á", "bonus" => ["strength" => 3, "intelligence" => 0, "hp" => 0], "class" => "melee"],
["name" => "–ö–æ–ø—å–µ", "bonus" => ["strength" => 2, "intelligence" => 0, "hp" => 1], "class" => "melee"],
["name" => "–©–∏—Ç", "bonus" => ["strength" => 0, "intelligence" => 0, "hp" => 3], "class" => "melee"],
["name" => "–°–∏–ª–∫–∏ –∏ –ª–æ–≤—É—à–∫–∏", "bonus" => ["strength" => 0, "intelligence" => 5, "hp" => 0], "class" => "scout"],
];
$militia = [];
for ($i = 0; $i < count($conscripts); $i++) {
    $soldier = $conscripts[$i];
    $weapon = $weapons[array_rand($weapons)];
    $soldier["weaponsName"] = $weapon["name"];
    $soldier["weaponsClass"] = $weapon["class"];
    $soldier["hp"] += $weapon["bonus"] ["hp"];
    $soldier["strength"] += $weapon["bonus"] ["strength"];
    $soldier["intelligence"] += $weapon["bonus"] ["intelligence"];
    $militia[] = $soldier;
}
$ourUnits = [
    "ranged" => [],
    "melee" => [],
    "scout" => []
];
foreach ($militia as $soldier) {
    $weaponsClass = $soldier["weaponsClass"];
    if (isset($ourUnits[$weaponsClass])) {
        $ourUnits[$weaponsClass][] = $soldier;
    }
}
$ourCommanders = [];
$ourStats = [];

foreach ($ourUnits as $type => $unit) {
    if (!empty($unit)) {
        // –ù–∞—Ö–æ–¥–∏–º –∫–æ–º–∞–Ω–¥–∏—Ä–∞ (—Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º)
        $maxIntelligence = -1;
        $commander = null;
        
        foreach ($unit as $soldier) {
            if ($soldier["intelligence"] > $maxIntelligence) {
                $maxIntelligence = $soldier["intelligence"];
                $commander = $soldier["name"];
            }
        }
$ourCommanders = [];
$ourStats = [];
$ourCommanders[$type] = $commander;
        
        // –°—á–∏—Ç–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ—Ç—Ä—è–¥–∞
        $totalHP = 0;
        $totalStrength = 0;
        $totalIntelligence = 0;
        
        foreach ($unit as $soldier) {
            $totalHP += $soldier["hp"];
            $totalStrength += $soldier["strength"];
            $totalIntelligence += $soldier["intelligence"];
        }
        
        $ourStats[$type] = [
            "count" => count($unit),
            "hp" => $totalHP,
            "strength" => $totalStrength,
            "intelligence" => $totalIntelligence
        ];
    }
}
?>

<h2>1) –í—Å–µ –∂–∏—Ç–µ–ª–∏ –¥–µ—Ä–µ–≤–Ω–∏ (<?= count($villagers) ?>)</h2>
<table class="table">
    <tr><th>–ò–º—è</th><th>–ü–æ–ª</th><th>–í–æ–∑—Ä–∞—Å—Ç</th><th>HP</th><th>–°–∏–ª–∞</th><th>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç</th><th>
    <?php foreach ($villagers as $hobbit) { ?>
        <tr>
                <td><?= $hobbit["name"] ?></td>
                <td><?= $hobbit["gender"] ?></td>
                <td><?= $hobbit["age"] ?></td>
                <td><?= $hobbit["hp"] ?></td>
                <td><?= $hobbit["strength"] ?></td>
                <td><?= $hobbit["intelligence"] ?></td>
        <tr>
    <?php } ?>
</table>

<h2>2) –ü—Ä–∏–∑–≤–∞–Ω–Ω—ã–µ –º—É–∂—á–∏–Ω—ã (>18) - –æ–ø–æ–ª—á–µ–Ω–∏–µ (<?= count($militia) ?>)</h2>
<table class="table">
    <tr><th>–ò–º—è</th><th>–í–æ–∑—Ä–∞—Å—Ç</th><th>HP</th><th>–°–∏–ª–∞</th><th>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç</th><th>–û—Ä—É–∂–∏–µ</th></tr>
    <?php foreach ($militia as $hobbit) { ?>
        <tr>
            <td><?=$hobbit["name"] ?></td>
            <td><?=$hobbit["age"] ?></td>
            <td><?=$hobbit["hp"] ?></td>
            <td><?=$hobbit["strength"] ?></td>
            <td><?=$hobbit["intelligence"] ?></td>
            <td><?=$hobbit["weaponsName"] ?></td>
        </tr>
    <?php } ?>
</table>

<h2>3) –û—Ç—Ä—è–¥—ã –∏ –∫–æ–º–∞–Ω–¥–∏—Ä—ã</h2>
<div class="grid">
    <!-- –û—Ç—Ä—è–¥ —Å—Ç—Ä–µ–ª–∫–æ–≤ -->
    <div class="unit">
        <h3>üèπ –°—Ç—Ä–µ–ª–∫–∏ (<?= $ourStats["ranged"]["count"] ?? 0 ?>)</h3>
        <p><b>–ö–æ–º–∞–Ω–¥–∏—Ä:</b> <?= $ourCommanders["ranged"] ?? "–Ω–µ—Ç" ?></p>
        <p>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ: <?= $ourStats["ranged"]["hp"] ?? 0 ?> | ‚öîÔ∏è –°–∏–ª–∞: <?= $ourStats["ranged"]["strength"] ?? 0 ?> | üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: <?= $ourStats["ranged"]["intelligence"] ?? 0 ?></p>
        <?php if (!empty($ourUnits["ranged"])) { ?>
        <div class="vlist">
            <?php foreach ($ourUnits["ranged"] as $u) { ?>
            <div class="smallcard">
                <div class="avatar">üèπ</div>
                <div class="info">
                    <b><?= $u["name"] ?></b>
                    <span>ü™ì –û—Ä—É–∂–∏–µ: <?= $u["weaponsName"] ?></span>
                    <span>‚ù§Ô∏è <?= $u["hp"] ?> | ‚öîÔ∏è <?= $u["strength"] ?> | üß† <?= $u["intelligence"] ?></span>
                </div>
            </div>
            <?php } ?>
        </div>
        <?php } else { ?>
        <p class="empty">–ù–µ—Ç –±–æ–π—Ü–æ–≤</p>
        <?php } ?>
    </div>

    <!-- –û—Ç—Ä—è–¥ –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è -->
    <div class="unit">
        <h3>‚öîÔ∏è –ë–ª–∏–∂–Ω–∏–π –±–æ–π (<?= $ourStats["melee"]["count"] ?? 0 ?>)</h3>
        <p><b>–ö–æ–º–∞–Ω–¥–∏—Ä:</b> <?= $ourCommanders["melee"] ?? "–Ω–µ—Ç" ?></p>
        <p>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ: <?= $ourStats["melee"]["hp"] ?? 0 ?> | ‚öîÔ∏è –°–∏–ª–∞: <?= $ourStats["melee"]["strength"] ?? 0 ?> | üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: <?= $ourStats["melee"]["intelligence"] ?? 0 ?></p>
        <?php if (!empty($ourUnits["melee"])) { ?>
        <div class="vlist">
            <?php foreach ($ourUnits["melee"] as $u) { ?>
            <div class="smallcard">
                <div class="avatar">üõ°Ô∏è</div>
                <div class="info">
                    <b><?= $u["name"] ?></b>
                    <span>ü™ì –û—Ä—É–∂–∏–µ: <?= $u["weaponsName"] ?></span>
                    <span>‚ù§Ô∏è <?= $u["hp"] ?> | ‚öîÔ∏è <?= $u["strength"] ?> | üß† <?= $u["intelligence"] ?></span>
                </div>
            </div>
            <?php } ?>
        </div>
        <?php } else { ?>
        <p class="empty">–ù–µ—Ç –±–æ–π—Ü–æ–≤</p>
        <?php } ?>
    </div>

    <!-- –û—Ç—Ä—è–¥ –¥–∏–≤–µ—Ä—Å–∞–Ω—Ç–æ–≤ -->
    <div class="unit">
        <h3>üïµÔ∏è –î–∏–≤–µ—Ä—Å–∞–Ω—Ç—ã (<?= $ourStats["scout"]["count"] ?? 0 ?>)</h3>
        <p><b>–ö–æ–º–∞–Ω–¥–∏—Ä:</b> <?= $ourCommanders["scout"] ?? "–Ω–µ—Ç" ?></p>
        <p>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ: <?= $ourStats["scout"]["hp"] ?? 0 ?> | ‚öîÔ∏è –°–∏–ª–∞: <?= $ourStats["scout"]["strength"] ?? 0 ?> | üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç: <?= $ourStats["scout"]["intelligence"] ?? 0 ?></p>
        <?php if (!empty($ourUnits["scout"])) { ?>
        <div class="vlist">
            <?php foreach ($ourUnits["scout"] as $u) { ?>
            <div class="smallcard">
                <div class="avatar">üï∏Ô∏è</div>
                <div class="info">
                    <b><?= $u["name"] ?></b>
                    <span>ü™ì –û—Ä—É–∂–∏–µ: <?= $u["weaponsName"] ?></span>
                    <span>‚ù§Ô∏è <?= $u["hp"] ?> | ‚öîÔ∏è <?= $u["strength"] ?> | üß† <?= $u["intelligence"] ?></span>
                </div>
            </div>
            <?php } ?>
        </div>
        <?php } else { ?>
        <p class="empty">–ù–µ—Ç –±–æ–π—Ü–æ–≤</p>
        <?php } ?>
    </div>
</div>